resources:
  subject:
    attributes:
    - id: id
    - id: role
      title: The role of the employee "Manager" / Operator
      allowableValues:  # Valid values for policy validation
      - OPERATOR
      - MANAGER
    - id: branchId
      title: Branch ID
    - id: maxOrderAmount
      title: Maximum order
      type: int
  customer:
    title: Customer
    attributes:
    - id: id
      title: Client ID
    - id: branchId
      title: Branch ID
  order:
    title: Order
    actions:
    - view
    - create
    - approve
    - reject
    attributes:
    - id: id
      title: Order ID
    - id: amount
      title: Order Amount
      type: int
    - id: branchId
      title: Branch ID
    - id: customerId
      title: Client ID


permissions:
- title: Work only with orders of your branch
  accessToActions: [order.create, order.approve, order.reject, order.view]
  rules:
    - title: Only your branch
      operation: AND
      conditions:
      - order.branchId == subject.branchId

- title: Transaction man
  accessToActions: [order.create]
  rules:
    - title: Access Transaction Man
      operation: AND
      conditions:
      - subject.role == 'OPERATOR'

- title: Manager
  accessToActions: [order.approve, order.reject]
  rules:
    - title: Manager Access
      operation: AND
      conditions:
      - subject.role == 'MANAGER'
      - subject.maxOrderAmount > order.amount